<%# Overriding partial in hyrax gem in order to change the delete button %>
<div class="show-actions">
  <% if Hyrax.config.analytics? %>
    <%= link_to "Analytics", presenter.stats_path, id: 'stats', class: 'btn btn-default', data: { turbolinks: false } %>
  <% end %>
  <% if presenter.editor? %>
    <%= link_to "Edit", edit_polymorphic_path([main_app, presenter]), class: 'btn btn-default' %>
    <%# Changes start here %>
    <% if current_user.admin? %>
      <%= link_to "Delete", [main_app, presenter], class: 'btn btn-danger', data: { confirm: "Delete this #{presenter.human_readable_type}?" }, method: :delete %>
      <% if @presenter.workflow.actions.present? && @presenter.solr_document['workflow_state_name_ssim'].first.capitalize == 'Deposited' %>
        <%= form_tag main_app.hyrax_workflow_action_path(presenter), method: :put do %>
          <%= hidden_field :workflow_action, :name, value: 'tombstone' %>
          <input class="btn btn-danger" type="submit" value="Tombstone" data-confirm='<%= t('hyrax.tombstone.confirmation') %>'>
        <% end %>
      <% end %>
    <% elsif @presenter.workflow.actions.present? %>
      <button class="btn btn-danger" data-toggle="modal" data-target="#deletion-request-modal">Request Deletion</button>
    <% end %>
    <%# Changes end here %>
    <% if presenter.member_presenters.size > 1 %>
      <%= link_to t("hyrax.file_manager.link_text"), polymorphic_path([main_app, :file_manager, presenter]), class: 'btn btn-default' %>
    <% end %>
    <% if presenter.valid_child_concerns.length > 0 %>
      <div class="btn-group">
        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Attach Child <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
          <% presenter.valid_child_concerns.each do |concern| %>
            <li>
              <%= link_to "Attach #{concern.human_readable_type}", polymorphic_path([main_app, :new, :hyrax, :parent, concern.model_name.singular], parent_id: presenter.id) %>
            </li>
          <% end %>
        </ul>
      </div>
    <% end %>
  <% end %>
  <% if presenter.work_featurable? %>
    <%= link_to "Feature", hyrax.featured_work_path(presenter, format: :json),
                data: { behavior: 'feature' },
                class: presenter.display_unfeature_link? ? 'btn btn-default collapse' : 'btn btn-default' %>

    <%= link_to "Unfeature", hyrax.featured_work_path(presenter, format: :json),
                data: { behavior: 'unfeature' },
                class: presenter.display_feature_link? ? 'btn btn-default collapse' : 'btn btn-default' %>
  <% end %>

  <!-- COinS hook for Zotero -->
  <span class="Z3988" title="<%= export_as_openurl_ctx_kev(presenter) %>"></span>
</div> 
