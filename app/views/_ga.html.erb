<%
if Hyrax.config.google_analytics_id?
tracking_id = Hyrax.config.google_analytics_id
%>
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', '<%= tracking_id %>']);
    <% if Rails.env.development? %>
      // This allows us to look at GA data live from locahost
      // HI TESTING TO SEE OVERRIDE
      _gaq.push(['_setDomainName', 'none']);
    <% end %>
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
<% end %>

// OVERRIDE: Testing for GA4 to make sure it is collecting data
// Google tag (gtag.js)

<script async src="https://www.googletagmanager.com/gtag/js?id=G-86EFWN09F8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-86EFWN09F8');
</script>